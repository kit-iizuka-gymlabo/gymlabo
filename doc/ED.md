# 外部設計（External Design）

## 1. 画面設計

### ワイヤーフレーム

### 画面遷移図

## 2. 方針設計

### 技術選定

- React.js
- Typescript
- Next.js
- Zustand(Fluxベースの軽量状態管理ライブラリ)
- Firebase
  - Cloud Firestore
  - Cloud Storage for Firebase
  - Firebase Authentication

### Git

ブランチ確認
```
git branch
```

ブランチ移動
```
git checkout ブランチ名
```

ブランチ作成
```
git branch ブランチ名
```

ブランチ作成＆移動
```
git checkout -b ブランチ名
```

リモートリポジトリに反映
```
git add ファイルパス
git commit -m "コミットメッセージ"
git push origin featureブランチ名
```

マージする前のコマンド
```
git fetch
git rebase develop
git push -f origin featureブランチ名
```
⇛その後、Pull Requestを発行
⇛コードレビュー
⇛マージ

- mainブランチ
  - プロダクション環境
  - リリース直前まで弄ることはあまりない
- developブランチ
  - 開発のメイン環境
  - プロダクトが完成したらmainブランチとマージ
- featureブランチ
  - issueの実装をするブランチ
  - 実装が出来たらdevelopブランチとマージ
  - 命名例：issue5の実装⇛feature5

### ディレクトリ構成

- components/ – Presentational components
  - 「見た目」を定義する UI コンポーネント (.tsx) を配置します。
  - ロジックを持たず、渡された props を純粋に描画するコンポーネントです。
  - 何らかのロジック（フックによるデータフェッチや状態管理）を持つコンポーネントは、ここではなく containers ディレクトリに配置してください。
  - このディレクトリ以下は、さらにカテゴリ別に階層化することができます。
- containers/ – Container components
  - 「振る舞い」を定義するコンポーネント (.tsx) を配置します。
  - フック関数などによるデータフェッチ、状態の保存・変更などのロジックを含み、最終的に表示すべきデータを別のコンポーネントの props オブジェクトとして渡します。
  - このディレクトリ以下は、さらにカテゴリ別に階層化することができます。
- hooks/ – Custom hooks
  - React のカスタムフックを配置します（例: useAuth.ts）。
  - アプリケーションのロジックはコンポーネント内には記述せず、できるだけフック関数として実装します。
  - 基本的に、フック関数は comtainers ディレクトリ以下のコンポーネントや、別のフック関数から呼び出されます。
- pages/ – Page components
  - Next.js のページコンポーネント (.tsx)、および、_app.tsx と _document.tsx を配置します。
  - Web サイトアクセス時の URL パスに応じたファイル (xxx.tsx) が読み込まれます。
- types/ – Type definitions
  - 複数ファイルで共有する TypeScript 型定義を配置します。
  - index.ts から export した型は、import { UserInfo } from '../types' のようにインポートできます。
- static/ - Static files
  - 静的ファイルを配置します
- utils/ – Other utilities
  - 上記いずれにも当てはまらないものを配置します。

## 3. 機能設計

### ①広告・宣伝を掲示・編集

- 満たす目的：1,2
- 優先度：高
- 難易度：高

- ポスターオブジェクトを作成
- クリックするとモーダル
- タイトル・説明文・画像を保持(DB)
- 数は固定
- デフォルトを定義
- adminロール用
- adminページからポスター一覧タブ
- オブジェクトリスト
- 各リストは編集ボタンを持つ
- 編集ボタンを押すと編集フォームが出現
- 送信ボタンを押すとPUTリクエスト
- GET・PUT

### ②地図機能

- 満たす目的：1,3
- 優先度：高
- 難易度：高

- 道案内機能
- ハンバーガーボタンの横にオプションリスト
- 選択するとカメラ寄るorポップアップが出る
- アバター操作機能
- パソコンの場合、WASD+マウス（カメラ）
- スマホの場合、ドラッグorジョイスティック
- メンバー募集に対応したテーブルやアバターが表示
- 衝突判定
- タイトル画面で外をカメラが旋回（外の探索は無し）
- 受付オブジェクトを押したら募集中のコミュニティが表示
- 掲示板オブジェクトを押したら告知イベントリストが表示
- GET

### ③メンバー募集機能

- 満たす目的：2,3
- 優先度：中
- 難易度：高

- userロール用機能
- userページ
- ユーザーが募集しているグループリスト一覧タブ
- 各リストは編集・削除ボタンを持つ
- 編集ボタンを押すと編集フォームが出現
- 送信ボタンを押すとPUTリクエスト
- リスト付近にグループ追加ボタン
- 追加ボタンを押すと追加フォームが出現
- 送信ボタンを押すとPOSTリクエスト
- グループ名・人数・ジャンル・説明文・連絡先
- GET・POST・PUT・DELETE

### ④イベント機能

- 満たす目的：2,3
- 優先度：中
- 難易度：高

- adminロール用機能
- 告知中のイベント一覧タブ
- 各リストは編集・削除ボタンを持つ
- 編集ボタンを押すと編集フォームが出現
- 送信ボタンを押すとPUTリクエスト
- リスト付近にグループ追加ボタン
- 追加ボタンを押すと追加フォームが出現
- 送信ボタンを押すとPOSTリクエスト
- イベント名・説明文
- GET・POST・PUT・DELETE

### ⑤GYMLABOの概要・説明機能

- 満たす目的：1,2
- 優先度：低
- 難易度：低

- GYMLABOの説明ページ（静的）
- GYMLABOの公式HPへのリンクだけにしても良い

### ⑥SNSシェア機能

- 満たす目的：1,2
- 優先度：低
- 難易度：中

- アプリ自体のリンクシェア機能
- グループのシェア機能
- イベントのシェア機能
- グループ・イベントのシェアボタンは地図のモーダルから
- アプリのシェアボタンはドロワー下部 or 地図の右上